(function(c){var a=function(f){var f=c(f),e=f[0];for(var d in e){(function(g){if(c.isFunction(e[g])){f[g]=(/^get[^a-z]/.test(g))?function(){return e[g].apply(e,arguments)}:function(){var h=arguments;f.each(function(i){var j=f[i];j[g].apply(j,h)});return f}}})(d)}return f};var b=function(e,d){var f=this;if(typeof d=="function"){d={callback:d}}var g=f.config=c.extend({},b.defaults,d,{target:e});g.status=0;g.scroll=f.getPos();g.target.scroll(function(h){if(f.isMove()){g.status=(g.status==0?1:(g.status==1?2:g.status));g.callback(h,g)}if(g.tm){clearTimeout(g.tm)}g.tm=setTimeout(function(){f.isMove();g.status=0;g.callback(h,g)},g.delay)})};c.extend(b.prototype,{isMove:function(){var f=this,h=f.config;var g=f.getPos();var d=(g.top!=h.scroll.top);var e=(g.left!=h.scroll.left);if(d||e){h.scrollY=d;h.scrollX=e;h.prevScroll=h.scroll;h.scroll=g;return true}return false},getPos:function(){var d=this,e=d.config;return{top:e.target.scrollTop(),left:e.target.scrollLeft()}}});b.defaults={delay:100};c.ex=c.ex||{};c.ex.fixed=function(d,f,h){var i=this,j=i.config=c.extend({},c.ex.fixed.defaults,h);j.targets=f;j.target=j.targets.eq(d);j.index=d;j=c.extend(j,{logicSize:{},rowSize:{},currentStyle:"",style:"",window:c(window),oldBrowser:c.browser.msie&&(c.browser.version<7||!c.boxModel)});j.dynamicMode=j.baseNode||!j.fixedX||!j.fixedY;if(j.dynamicFixed||j.dynamicMode||j.oldBrowser){c("body").append(j.target)}if(j.baseNode){j.baseNode=c(j.baseNode)}var g=i._cleanSize(j);if(j.dynamicFixed){i._eachSizeSet(function(k,m,l){j.dynamicFixed=j.dynamicFixed&&(g[m.pos1]!=undefined||g[m.pos2]!=undefined)})}if(j.dynamicMode){j.dynamicFixed=true}if(j.oldBrowser){i._padPos(g,i._cleanSize(j.target[0].currentStyle))}else{if(!j.dynamicFixed){j.target.css("position","fixed").css(g);return}}j.container=c.boxModel?c("html"):c("body");j.container.height();j.target.css("position",j.oldBrowser?"absolute":"fixed");if(!/hidden|scroll/i.test(j.target.css("overflow"))){j.target.css("overflow","hidden")}i._smoothPatch();i._fixed(g);j.window.resize(function(){if(j.oldBrowser||j.baseNode){i._fixed()}});if(!(j.fixedX&&j.fixedY)){if(j.oldBrowser){var e;j.window.scroll(function(){if(e){clearTimeout(e)}e=setTimeout(function(){i._fixed()},0)})}else{new b(j.window,function(k,l){if((l.scrollX&&!j.fixedX)||(l.scrollY&&!j.fixedY)){if(l.status==1){i._fixed(j.logicSize,{unfixed:true})}else{if(l.status==0){i._fixed()}}}})}}};c.extend(c.ex.fixed.prototype,{_attn:[{size:"height",pos1:"top",pos2:"bottom"},{size:"width",pos1:"left",pos2:"right"}],_camel:[{size:"Height",pos1:"Top",pos2:"Bottom"},{size:"Width",pos1:"Left",pos2:"Right"}],_smoothPatch:function(){var d=this,e=d.config;if(!e.oldBrowser){return d}c.ex.fixed.config.smoothPatched=true;if(e.container.css("background-image")=="none"){e.container.css({"background-image":"url(null)"})}e.container.css({"background-attachment":"fixed"});return d},_eachSize:function(k){var l=this,m=l.config;for(var h=0;h<l._attn.length;h++){var g=l._attn[h];for(var e in g){var d=g[e];k({idx:h,name:d,camel:d.slice(0,1).toUpperCase()+d.slice(1)})}}},_eachSizeSet:function(e){var g=this,h=g.config;for(var d=0;d<g._attn.length;d++){e(d,g._attn[d],g._camel[d],g._attn[1-d],g._camel[1-d])}},_parseSize:function(g,d){var f=this,h=f.config;if(g=="auto"){return undefined}if((g+"").indexOf("%")<0){return parseInt(g)||0}var e=h.container.attr(d?"clientWidth":"clientHeight");return Math.round(e*parseInt(g)/100)},_parseIntSize:function(f,d){var e=this,g=e.config;return parseInt(e._parseSize(f,d))||0},_cleanSize:function(e){var f=this,g=f.config;var d={};f._eachSize(function(h){if(/undefined|auto/i.test(e[h.name])){try{delete e[h.name]}catch(i){}}else{d[h.name]=e[h.name]}});return d},_padPos:function(d,e){var f=this,h=f.config;var g;f._eachSizeSet(function(i,k,j){if(d[k.pos1]==undefined&&d[k.pos2]==undefined){if((g=e[k.pos1])!=undefined){d[k.pos1]=g}else{if((g=e[k.pos2])!=undefined){d[k.pos2]=g}else{d[k.pos1]=0}}}if(d[k.size]==undefined){if((d[k.size]=e[k.size])==undefined){d[k.size]=h.target[k.size]()}}});return d},_calcRowSize:function(h,g){var i=this,j=i.config;var g=c.extend({abs:false,base:j.baseNode,unfixed:false},g);var f={};i._eachSize(function(k){var l=h[k.name];if(!(/undefined/i.test(l))){f[k.name]=i._parseIntSize(l,/width|left|right/i.test(k.name));if(g.abs&&/top|left/i.test(k.name)){f[k.name]+=j.window["scroll"+k.camel]()}}});if(g.base){var e=j.baseNode.offset();i._eachSizeSet(function(l,m,k){e[m.pos2]=j.container.attr("client"+k.size)-(e[m.pos1]+j.baseNode["outer"+k.size]())});i._eachSize(function(l){if(!(/height|width/i.test(l.name))&&f[l.name]==undefined&&((!l.idx&&j.baseY)||(l.idx&&j.baseX))){var k=l.name=="top"?"bottom":l.name=="bottom"?"top":l.name=="left"?"right":"left";f[k]+=e[k]}})}var d=g.unfixed&&!j.fixedX?-1:1;if(d==-1||(!g.unfixed&&!j.fixedY)){if(f.top!=undefined){f.top-=(j.window.scrollTop()*d)}if(f.bottom!=undefined){f.bottom+=(j.window.scrollTop()*d)}}var d=!g.unfixed&&!j.fixedX?-1:1;if(d==-1||(g.unfixed&&!j.fixedY)){if(f.left!=undefined){f.left+=(j.window.scrollLeft()*d)}if(f.right!=undefined){f.right-=(j.window.scrollLeft()*d)}}return f},_fixed:function(g,f){var h=this,i=h.config;var f=c.extend({unfixed:false},f);if(g){i.logicSize=h._padPos(h._cleanSize(g),i.logicSize)}if(!i.oldBrowser){i.target.css(c.extend(i.baseNode||!(i.fixedX&&i.fixedY)?h._calcRowSize(i.logicSize,f):i.logicSize,{position:f.unfixed?"absolute":"fixed"}))}else{var e=h._calcRowSize(i.logicSize);var d=false;if(i.target.is(":hidden")){d=true;i.target.show()}h._eachSizeSet(function(k,m,j){i.target.css(m.size,e[m.size]);var l=e[m.pos1];if(l==undefined){l=i.container.attr("client"+j.size)-e[m.pos2]-i.target["outer"+j.size]()}var n=(l+i.target["outer"+j.size]())-i.container.attr("client"+j.size);if(n>0){n=i.target[m.size]()-n;if(n>0){i.target[m.size](n)}else{d=true}}if(!d){i.target[0].style.setExpression(m.pos1,l+((!k&&!i.fixedY)||(k&&!i.fixedX)?i.window["scroll"+j.pos1]():"+eval(document.body.scroll"+j.pos1+"||document.documentElement.scroll"+j.pos1+")"))}});if(d){i.target.hide()}}},getTarget:function(){return this.config.target},fixedOpen:function(d){var e=this,g=e.config;if(!g.dynamicFixed){return}g.target.css(e.getFixedSize(g.logicSize));if(g.oldBrowser){g.target[0].style.removeExpression("top");g.target[0].style.removeExpression("left")}if(d){setTimeout(function(){if(g.oldBrowser){g.target.css({top:"auto",left:"auto"});g.target.css(e._calcRowSize(g.logicSize,{abs:true}))}d()},100)}return e},fixedClose:function(d){var e=this,f=e.config;if(!f.dynamicFixed){return}e._fixed(d);return e},getFixedSize:function(d){var e=this,f=e.config;return e._calcRowSize(e._padPos(d,f.logicSize),{abs:f.oldBrowser})},resize:function(d){var e=this,f=e.config;e.fixedOpen(function(){e.fixedClose(d)});return e}});c.ex.fixed.config={smoothPatched:false};c.ex.fixed.defaults={api:false,dynamicFixed:false,baseNode:"",baseX:true,baseY:true,fixedX:true,fixedY:true};c.fn.exFixed=function(f){var d=this,e=[];d.each(function(g){var i=d.eq(g);var h=i.data("ex-fixed")||new c.ex.fixed(g,d,f);e.push(h);i.data("ex-fixed",h)});return f&&f.api?a(e):d}})(jQuery);